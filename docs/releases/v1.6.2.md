# Release v1.6.2 - Technical Debt Fixes and Configuration Corrections

**Release Date:** December 16, 2025
**Type:** Patch Release (Bug Fixes)
**Status:** Completed

## Overview

Version 1.6.2 addresses immediate technical debt items identified in the v1.6.1 tech debt analysis, focusing on code quality improvements and configuration correctness. This release fixes all ESLint errors in test files, corrects the ENABLE_WORKERS default configuration to match implementation status, and updates all related documentation.

## What's Fixed

### ESLint Error Resolution (12 fixes)

All ESLint errors in test files have been resolved, improving code quality and maintainability:

#### Import Cleanup
- **errors.test.mjs**: Removed unused `beforeEach` import
- **mcp-server.test.mjs**: Removed unused `vi` import
- **recipe-manager.test.mjs**: Removed unused `vi` import
- **recipe-validator.test.mjs**: Removed unused `beforeEach` import
- **streaming.test.mjs**: Removed unused `beforeEach` import

#### Code Quality Fixes
- **logger.test.mjs**: Fixed duplicate key `operation` in cache test object (changed to `toolName`)
- **recipe-storage.test.mjs**: Removed unused variable `backupExists`
- **recipe-validator.test.mjs**:
  - Fixed camelCase violations: `drop_control_chars` → `dropControlChars`
  - Fixed dot notation issue: `recipes["id0"]` → `recipes.id0`
- **streaming.test.mjs**: Added `eslint-disable-next-line` for intentionally unused loop variables

#### Verification
```bash
npm run lint
# ✓ All ESLint checks pass (0 errors, 0 warnings)
```

### Configuration Default Correction

Fixed misleading default for `ENABLE_WORKERS` environment variable:

#### Changes
- **Previous**: `ENABLE_WORKERS = true` (default enabled)
- **Current**: `ENABLE_WORKERS = false` (default disabled)
- **Reason**: Worker thread implementation is not yet complete

#### Files Updated
1. **src/node/mcp-server.mjs**:
   ```javascript
   // Before
   const ENABLE_WORKERS = process.env.CYBERCHEF_ENABLE_WORKERS !== "false";

   // After
   const ENABLE_WORKERS = process.env.CYBERCHEF_ENABLE_WORKERS === "true";
   ```

2. **README.md**:
   - Updated configuration options section
   - Changed default value from `true` to `false`
   - Added clarification: "disabled by default, not yet implemented"

3. **docs/guides/user_guide.md**:
   - Updated environment variables table
   - Changed default value from `true` to `false`
   - Updated description: "not yet implemented"

### Version Updates

All version references updated to v1.6.2:

#### Files Updated
- `package.json`: `mcpVersion` field
- `src/node/mcp-server.mjs`: `VERSION` constant
- `tests/mcp/mcp-server.test.mjs`: Version test expectation
- `README.md`: Download URLs and version references
- `CHANGELOG.md`: New v1.6.2 section

## Testing

### Test Results
All tests continue to pass with improved code quality:

```bash
npm run test:mcp
# Test Files  9 passed (9)
# Tests       311 passed (311)
# Duration    8.73s
```

### Coverage
Coverage metrics maintained at v1.6.1 levels:
- Lines: 78.93%
- Statements: 78.7%
- Functions: 89.33%
- Branches: 74.68%

## Migration Guide

### For Users

**No action required** - this is a patch release with backward-compatible fixes.

### For Developers

If you have ENABLE_WORKERS explicitly set in your environment:

#### Previous Behavior
```bash
# Workers enabled by default, disable with:
export CYBERCHEF_ENABLE_WORKERS=false
```

#### New Behavior
```bash
# Workers disabled by default, enable with:
export CYBERCHEF_ENABLE_WORKERS=true
```

**Note**: Worker thread functionality is not yet implemented, so this change only affects the default value. The feature has no functional impact in either configuration.

## Technical Details

### ESLint Configuration
All tests now pass ESLint validation with:
- Zero errors
- Zero warnings
- Consistent code style
- Proper import/export hygiene

### Code Quality Improvements
- Removed unused imports and variables
- Fixed naming convention violations
- Improved test clarity with proper variable naming
- Added appropriate ESLint suppressions for intentional cases

### Configuration Accuracy
- Defaults now reflect implementation status
- Documentation synchronized across all files
- Clear messaging about unimplemented features

## Files Changed

### Source Files
- `src/node/mcp-server.mjs` - ENABLE_WORKERS default

### Test Files
- `tests/mcp/errors.test.mjs` - Import cleanup
- `tests/mcp/logger.test.mjs` - Duplicate key fix
- `tests/mcp/mcp-server.test.mjs` - Import cleanup, version test
- `tests/mcp/recipe-manager.test.mjs` - Import cleanup
- `tests/mcp/recipe-storage.test.mjs` - Unused variable removal
- `tests/mcp/recipe-validator.test.mjs` - camelCase and dot notation fixes
- `tests/mcp/streaming.test.mjs` - Import cleanup, ESLint suppressions

### Documentation Files
- `README.md` - Configuration and version updates
- `docs/guides/user_guide.md` - Configuration updates
- `CHANGELOG.md` - v1.6.2 section
- `package.json` - mcpVersion update

## Acknowledgments

This release addresses technical debt items identified in the comprehensive v1.6.1 tech debt analysis, prioritizing code quality and configuration accuracy improvements.

---

**Full Changelog**: https://github.com/doublegate/CyberChef-MCP/compare/v1.6.1...v1.6.2
